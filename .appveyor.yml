version: '{build}'
clone_depth: 10 # to allow queued build jobs
image:
- Visual Studio 2017

environment:
  # Use cygwin embeded gettext tools
  path: '%path%;C:\cygwin64\bin'

init:
- git clone https://github.com/DatavenueLiveObjects/Payload-decoders.git

install:
- mvn install:install-file -Dfile="%APPVEYOR_BUILD_FOLDER%\Payload-decoders\lib\lo-js-decoder-test-framework-utils-1.2.3-jar-with-dependencies.jar>" -DgroupId="com.orange.lo" -DartifactId="lo-js-decoder-test-framework-utils" -Dversion="1.2.3" -Dpackaging="jar"

build_script:
- cd Payload-decoders\lo-js-decoder-test-framework-samples
- mvn clean install

test_script:
- mvn test
